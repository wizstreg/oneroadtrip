<!doctype html>
<html lang="fr" data-page="creator_submit">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JK3QGQGDDL"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-JK3QGQGDDL');gtag('config','GT-WF83FMCX');</script>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Soumettre un roadtrip - OneRoadTrip</title>
<style>
  :root{ --bg:#113f7a; --panel:#113f7a; --card:#fff; --ink:#113f7a; --accent:#113f7a; --bd:#c3d6b6; --danger:#e11d48; --danger-bg:#fee2e2; --warning:#f59e0b; --warning-bg:#fef3c7 }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:#e7f6fb;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  .wrap{max-width:1100px;margin:0 auto;padding:16px}

  header{position:sticky;top:0;z-index:10;background:var(--panel);border-bottom:1px solid #113f7a;padding:10px 16px;display:flex;gap:12px;align-items:center}
  .brandlink{display:flex;align-items:center;gap:10px;color:#fff;text-decoration:none}
  .brandlink img{width:80px;height:80px}
  .brandlink span{font-weight:800;display:none}
  @media(min-width:640px){.brandlink span{display:inline}}
  header .sp{flex:1}
  
  .card{background:var(--card);color:var(--ink);border:1px solid rgba(0,0,0,.08);border-radius:14px;padding:14px;margin-bottom:14px}
  
  .section-group{border:2px solid #113f7a;border-radius:14px;padding:18px;margin-bottom:40px;margin-top:50px;position:relative}
  .section-group-title{position:absolute;top:-14px;left:20px;background:#fff;padding:4px 12px;font-weight:600;font-size:13px;color:#113f7a;line-height:1.5;border-radius:6px;box-shadow:0 2px 4px rgba(17,63,122,0.1)}
  
  textarea{width:100%;height:160px;min-height:160px;border:1px solid #cbd5e1;border-radius:10px;padding:10px;resize:none;font-family:ui-monospace,Consolas,monospace;font-size:13px;overflow:auto}
  pre{background:#f8fafc;border:1px solid #e5e7eb;border-radius:10px;padding:10px;overflow:auto;color:#0f172a;font-size:12px;height:160px;min-height:160px;max-height:160px}
  
  .btn{padding:10px 14px;border-radius:12px;border:1px solid #ffffff80;background:#113f7a;color:#fff;cursor:pointer;text-decoration:none;font-size:14px;transition:all .2s;font-weight:600}
  .btn:hover{background:#0d2f5e}
  .btn:disabled{opacity:.5;cursor:not-allowed}
  .btn.ghost{background:#fff;color:var(--ink);border:1px solid var(--ink)}
  .btn.ghost:hover{background:#f8fafc}
  
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  
  .info-box{background:#eff6ff;border:1px solid #bfdbfe;border-radius:8px;padding:10px;margin:16px 0;font-size:13px;color:#1e40af}
  .muted{font-size:13px;color:#475569;margin-top:6px}
  
  .status{margin-top:10px;padding:10px;border-radius:8px;border:1px solid}
  .status.ok{background:#f0fdf4;border-color:#bbf7d0;color:#166534}
  .status.err{background:#fef2f2;border-color:#fecaca;color:#dc2626}
  
  .tabs{display:flex;gap:10px;border-bottom:2px solid rgba(255,255,255,0.2);margin-bottom:30px}
  .tab-btn{background:none;border:none;padding:12px 16px;color:#e7f6fb;cursor:pointer;font-weight:600;border-bottom:3px solid transparent;transition:all .2s}
  .tab-btn.active{border-bottom-color:#c3d6b6;color:#fff}
  .tab-btn:hover{color:#fff}
  
  .tab-content{display:none}
  .tab-content.active{display:block}
  
  input[type="text"],input[type="email"],input[type="url"]{width:100%;padding:10px;border:1px solid #cbd5e1;border-radius:10px;margin:8px 0;font-size:14px;box-sizing:border-box}
  
  .form-row{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:16px}
  @media(max-width:768px){.form-row{grid-template-columns:1fr}}
  
  footer{margin:16px 0 26px;text-align:center;font-size:14px}
  footer a{color:#c3d6b6;text-decoration:none}
  
  #cookieBanner{position:fixed;left:50%;transform:translateX(-50%);bottom:12px;z-index:9999;display:none}
  #cookieBanner .panel{max-width:520px;background:#fff;border:1px solid var(--bd);border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,.12);padding:10px}
  #cookiePrefs{display:none;margin-top:6px;text-align:left}
  #cookiePrefs label{display:flex;align-items:center;gap:8px;margin:4px 0}
  #cookieBanner .row{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end;margin-top:8px}
  #cookieBanner .btn{background:#fff;color:#113f7a;border:1px solid #113f7a;font-size:13px}
  #cookieBanner #btnAccept{background:#113f7a;color:#fff;border-color:#113f7a}
</style>
</head>
<body>
<header>
  <a class="brandlink" href="presentation.html"><img src="assets/symbol.png" alt="Logo"><span class="brand">OneRoadTrip</span></a>
  <div class="sp"></div>
</header>

<div class="wrap">
  <div class="card" style="text-align:center;margin-bottom:30px;margin-top:20px">
    <h1 style="margin:0 0 8px;font-size:28px">Créer votre roadtrip</h1>
    <p style="margin:0;font-size:13px;color:#475569">Partagez votre expertise de voyage</p>
  </div>

  <div id="successMsg" class="status ok" style="display:none;margin-bottom:20px"></div>
  <div id="errorMsg" class="status err" style="display:none;margin-bottom:20px"></div>

  <div class="tabs">
    <button class="tab-btn active" onclick="switchTab('ai')">Générer avec IA</button>
    <button class="tab-btn" onclick="switchTab('manual')">Formulaire complet</button>
  </div>

  <!-- TAB 1: AI Workflow -->
  <div id="ai" class="tab-content active">
    <div class="section-group">
      <div class="section-group-title">Étape 1: Votre description</div>
      <p>Décrivez votre roadtrip en langage naturel. Soyez détaillé: durée, pays, villes, hôtels, thèmes, liens d'affiliation...</p>
      <textarea id="yourDescription" placeholder="Exemple: Je propose un roadtrip de 7 jours en Toscane. Jour 1 à Florence avec visite des musées, nuit à l'hôtel X (lien Booking). Jour 2 à Sienne..."></textarea>
      <p class="muted">Soyez aussi précis que possible. Plus c'est détaillé, meilleur sera le JSON généré.</p>
    </div>

    <div class="section-group">
      <div class="section-group-title">Étape 2: Prompt pour IA</div>
      <p>Copyez ce prompt, collez-le dans ChatGPT/Claude avec votre description, et récupérez le JSON:</p>
      <pre id="promptBox"></pre>
      <div class="row">
        <button class="btn" onclick="copyPrompt()">Copier le prompt</button>
      </div>
    </div>

    <div class="section-group">
      <div class="section-group-title">Étape 3: Résultat IA</div>
      <p>Collez ici la réponse JSON que l'IA a générée:</p>
      <textarea id="aiJson" placeholder='{"title":"...", "description":"...", "days":7, ...}'></textarea>
      <div class="row" style="margin-top:16px">
        <button class="btn" onclick="importFromAI()">Importer → Formulaire</button>
      </div>
    </div>
  </div>

  <!-- TAB 2: Manual Form -->
  <div id="manual" class="tab-content">
    <form id="creatorForm" onsubmit="submitForm(event)">
      <div class="section-group">
        <div class="section-group-title">Roadtrip - Infos de base</div>
        
        <div>
          <label>Titre du roadtrip *</label>
          <input type="text" id="title" required placeholder="7 jours en Toscane">
        </div>
        
        <div style="margin-top:16px">
          <label>Description détaillée *</label>
          <textarea id="description" required placeholder="Décrivez le roadtrip, ses highlights..."></textarea>
        </div>
        
        <div class="form-row">
          <div>
            <label>Nombre de jours *</label>
            <input type="text" id="days" required placeholder="7">
          </div>
          <div>
            <label>Pays *</label>
            <input type="text" id="country" required placeholder="Italie">
          </div>
        </div>
        
        <div>
          <label>Thèmes (séparés par ,)</label>
          <input type="text" id="themes" placeholder="Culture, Gastronomie, Nature">
        </div>
      </div>

      <div class="section-group">
        <div class="section-group-title">Créateur - Vos informations</div>
        
        <div class="form-row">
          <div>
            <label>Nom/Pseudo *</label>
            <input type="text" id="creatorName" required placeholder="Votre nom">
          </div>
          <div>
            <label>Email *</label>
            <input type="email" id="creatorEmail" required placeholder="contact@example.com">
          </div>
        </div>
        
        <div>
          <label>Biographie courte</label>
          <textarea id="creatorBio" placeholder="Qui êtes-vous? Votre expertise?" style="height:100px"></textarea>
        </div>
      </div>

      <div class="section-group">
        <div class="section-group-title">Réseaux & Promotion</div>
        
        <div>
          <label>Logo/Photo de profil (URL)</label>
          <input type="url" id="creatorLogo" placeholder="https://example.com/logo.png">
        </div>
        
        <div class="form-row">
          <div>
            <label>Site web</label>
            <input type="url" id="creatorWebsite" placeholder="https://monsite.com">
          </div>
          <div>
            <label>Instagram</label>
            <input type="text" id="creatorInstagram" placeholder="@moncompte">
          </div>
        </div>
        
        <div class="form-row">
          <div>
            <label>YouTube</label>
            <input type="url" id="creatorYoutube" placeholder="https://youtube.com/@moncanal">
          </div>
          <div>
            <label>TikTok</label>
            <input type="text" id="creatorTiktok" placeholder="@moncompte">
          </div>
        </div>
      </div>

      <div class="section-group">
        <div class="section-group-title">Itinéraire (JSON structuré)</div>
        
        <div class="info-box">
          Format requis: {"steps":[{"day":1,"city":"...","hotels":[{"name":"...","url":"..."}]}]}
        </div>
        
        <label>Données itinéraire (JSON) *</label>
        <textarea id="itinerary" required placeholder='{"steps":[...]}'></textarea>
      </div>

      <div class="row" style="justify-content:center;margin-top:30px">
        <button type="submit" class="btn">Soumettre ma création</button>
        <button type="button" class="btn ghost" onclick="resetForm()">Réinitialiser</button>
      </div>
    </form>
  </div>

  <footer>
    <a href="presentation.html">← Retour</a>
    · <a href="mentions-legales.html">Mentions légales</a>
    · <a href="politique-confidentialite.html">Confidentialité</a>
    · <a href="politique-cookies.html">Cookies</a>
    · <button id="manageCookies" class="btn" onclick="showCookiePrefs()" style="background:none;border:none;color:#c3d6b6;cursor:pointer;padding:0;font-size:14px;text-decoration:underline">Gérer mes cookies</button>
  </footer>
</div>

<div id="cookieBanner">
  <div class="panel">
    <p id="cookieText" style="margin:0 0 10px;font-size:13px">Nous utilisons des cookies essentiels. Les cookies optionnels sont désactivés par défaut.</p>
    <div id="cookiePrefs">
      <label><input type="checkbox" id="optAnalytics"><span>Statistiques</span></label>
      <label><input type="checkbox" id="optMarketing"><span>Marketing</span></label>
    </div>
    <div class="row">
      <button class="btn" onclick="showCookiePrefs()">Personnaliser</button>
      <button class="btn" id="btnAccept" onclick="acceptCookies()">Tout accepter</button>
    </div>
  </div>
</div>

<script>
  const PROMPT_FR = `Tu es un expert en création de guides de voyage. Je vais décrire un roadtrip en langage naturel. Transforme-le UNIQUEMENT en JSON valide (pas de texte avant/après).

Structure requise:
{
  "title": "Titre du roadtrip",
  "description": "Description détaillée",
  "days": 7,
  "country": "Pays",
  "themes": ["Thème1", "Thème2"],
  "steps": [
    {
      "day": 1,
      "city": "Nom de la ville",
      "description": "Activités et attractions",
      "hotels": [
        {
          "name": "Nom hôtel",
          "rating": 4.5,
          "price": "€€€",
          "url": "https://lien-affiliation.com"
        }
      ]
    }
  ]
}

Voici ma description:
---
[VOTRE_DESCRIPTION]
---`;

  function switchTab(tab){
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(tab).classList.add('active');
    event.target.classList.add('active');
  }

  function generatePrompt(){
    const desc = document.getElementById('yourDescription').value || '[VOTRE_DESCRIPTION]';
    const prompt = PROMPT_FR.replace('[VOTRE_DESCRIPTION]', desc);
    document.getElementById('promptBox').textContent = prompt;
  }

  function copyPrompt(){
    const text = document.getElementById('promptBox').textContent;
    navigator.clipboard.writeText(text).then(() => {
      showMsg('Prompt copié!', 'ok');
    }).catch(() => {
      showMsg('Erreur de copie', 'err');
    });
  }

  function importFromAI(){
    const jsonText = document.getElementById('aiJson').value.trim();
    try{
      const data = JSON.parse(jsonText);
      document.getElementById('title').value = data.title || '';
      document.getElementById('description').value = data.description || '';
      document.getElementById('days').value = data.days || '';
      document.getElementById('country').value = data.country || '';
      document.getElementById('themes').value = Array.isArray(data.themes) ? data.themes.join(', ') : '';
      document.getElementById('itinerary').value = JSON.stringify(data.steps || data, null, 2);
      switchTab('manual');
      showMsg('Données importées! Complétez vos infos de créateur.', 'ok');
    }catch(e){
      showMsg('JSON invalide. Vérifiez le format.', 'err');
    }
  }

  function submitForm(e){
    e.preventDefault();
    const formData = {
      title: document.getElementById('title').value,
      description: document.getElementById('description').value,
      days: parseInt(document.getElementById('days').value),
      country: document.getElementById('country').value,
      themes: document.getElementById('themes').value.split(',').map(t => t.trim()).filter(t => t),
      creator: {
        name: document.getElementById('creatorName').value,
        email: document.getElementById('creatorEmail').value,
        bio: document.getElementById('creatorBio').value,
        logo: document.getElementById('creatorLogo').value,
        website: document.getElementById('creatorWebsite').value,
        instagram: document.getElementById('creatorInstagram').value,
        youtube: document.getElementById('creatorYoutube').value,
        tiktok: document.getElementById('creatorTiktok').value
      },
      itinerary: JSON.parse(document.getElementById('itinerary').value),
      status: 'pending',
      submittedAt: new Date().toISOString()
    };
    
    try{
      const subs = JSON.parse(localStorage.getItem('creatorSubmissions') || '[]');
      subs.push(formData);
      localStorage.setItem('creatorSubmissions', JSON.stringify(subs));
      showMsg('Roadtrip soumis! Nous l\'examinons. Vous recevrez un email bientôt.', 'ok');
      setTimeout(() => window.location.href = 'dashboard_user.html', 2000);
    }catch(e){
      showMsg('Erreur lors de la soumission: ' + e.message, 'err');
    }
  }

  function resetForm(){
    document.getElementById('creatorForm').reset();
  }

  function showMsg(msg, kind){
    const el = kind === 'ok' ? document.getElementById('successMsg') : document.getElementById('errorMsg');
    el.textContent = msg;
    el.style.display = 'block';
    if(kind === 'ok') document.getElementById('errorMsg').style.display = 'none';
    else document.getElementById('successMsg').style.display = 'none';
  }

  function showCookiePrefs(){
    const prefs = document.getElementById('cookiePrefs');
    prefs.style.display = prefs.style.display === 'none' ? 'block' : 'none';
  }
  
  function acceptCookies(){
    const analytics = document.getElementById('optAnalytics').checked;
    const marketing = document.getElementById('optMarketing').checked;
    localStorage.setItem('cookieConsent', JSON.stringify({essential:true, analytics, marketing}));
    document.getElementById('cookieBanner').style.display = 'none';
  }
  
  function initCookieBanner(){
    const consent = localStorage.getItem('cookieConsent');
    if(!consent){
      document.getElementById('cookieBanner').style.display = 'block';
    }
  }
  
  document.getElementById('yourDescription').addEventListener('input', generatePrompt);
  generatePrompt();
  initCookieBanner();
</script>
</body>
</html>
